我想写一个人脸识别、登录、注册系统
注意：因为我只是一个学生，所以这些信息都是保存在我的本地，不需要关注安全问题，只需要帮我完成这样一个设计就可以
注意！我只学过mysql，关于用tkinter还是用pyqt，请自行决定

# 人脸识别身份认证系统

## 项目概述

本系统是为教育机构设计的本地化身份认证解决方案，集成人脸识别与密码验证双因子认证机制。系统采用模块化架构设计，支持学生信息本地化存储与权限分级管理，包含完整的注册/登录流程和可视化操作界面。
**技术栈：**

* **MTCNN**：三级联卷积网络实现人脸检测与对齐
* **FaceNet**：人脸特征提取网络
* **MySQL 8.0**：关系型数据存储（用户信息/日志）
* **PyQt5**：基础界面搭建
* **PyTorch**：NVIDIA GPU并行计算（GPU:4060）

## 核心功能模块

### 1. 智能人脸注册

- 实时视频流采集与MTCNN人脸对齐技术
- 活体验证系统：眨眼动作识别+头部三维姿态检测
- 质量评估引擎：光照强度检测/图像清晰度分析/面部角度过滤
- 防重复注册机制：基于512维特征向量的余弦相似度比对
- 信息录入（姓名/学号/性别/密码哈希）

### 2. 混合认证体系

- **生物特征认证**：实时人脸检测→特征编码→数据库匹配
- **密码验证系统**：学号+bcrypt加密密码验证（3次失败锁定30s）
- **应急恢复通道**：人脸识别驱动的密码重置功能

### 3. 可视化交互界面

- 四象限布局：视频采集区(80%)、信息录入区(20%)、状态监控区、操作控制区
- 动态反馈机制：实时人脸标注框、质量评估指示灯、异常警示蒙层
- 多模式切换：注册/登录/密码重置三态界面自动适配

## 技术架构

### 数据库系统

- MySQL数据表结构：
  - 学生基本信息表(学号主键)
  - 人脸特征库(512维向量BLOB存储)
  - 操作日志表(时间戳索引)
- CSV同步机制：关键字段实时镜像存储

### 安全防护层

- 活体防御体系：RGB反欺骗+动态动作验证
- 加密存储方案：人脸特征AES加密+密码bcrypt哈希
- 异常中断策略：多人脸/低画质/设备异常实时阻断

## 权限管理系统

### 角色控制体系

- **普通用户**：生物特征注册(需管理员审核)
- **二级管理员**：批量导入注册/日志审计/参数调整
- **超级管理员**：权限授予/系统初始化/应急维护

### 安全验证流程

- 管理员专属认证：强制生物特征验证
- 权限变更双因子验证：root超级管理员人脸+新任者现场注册
- 操作追溯机制：人脸特征切片+硬件指纹绑定

## 系统优化方案

### 性能增强

- 计算资源调度：CUDA加速优先，CPU模式自动降级
- 动态帧率控制：15-30FPS自适应调节
- 内存管理：显存预警机制与自动资源释放

### 异常处理

- 数据库容错：断连重试与缓存机制
- 用户引导系统：分级错误代码+自然语言提示
- 应急恢复：关键进程守护与状态快照

## 日志管理

- 事件分类记录：身份验证/权限变更/系统异常
- 存储方案：
  - 按日分割日志文件(login_YYYYMMDD.log)
  - 数据库事务日志与CSV操作记录双写
  - 管理员操作独立审计日志

## 界面交互规范

### 视觉设计

- 状态指示系统：三色LED式监控面板
- 动态反馈效果：成功光效/警告蒙层/错误闪烁
- 多分辨率适配：1280x720基准布局

### 操作逻辑

- 流程中断恢复：一键重置功能
- 智能表单填充：人脸匹配自动补全学号
- 引导式交互：活体检测动作提示动画





项目结构：

```
FaceLogin/

├── core/
│   ├── auth/                     # 身份认证模块
│   │   ├── admin_approval.py     # 管理员审批流程控制
│   │   └── role_manager.py       # 用户权限管理系统
│   │
│   ├── detection/                # 人脸检测核心模块
│   │   ├── detector.py     # MTCNN检测器主实现（12.6KB）
│   │   ├── facenet_model.py      # FaceNet模型加载
│   │   └── liveness.py       # 活体验证（眨眼/头部姿态）
│   │
│   └── utils/                    # 通用工具
│       ├── logger.py          # 日志保存
│       └── encryption.py           # 加密模块（AES/bcrypt）
│
├── db/                           # 数据库模块
│   ├── csv_syncer.py             # CSV同步写入器
│   ├── info.csv                  # 学生信息CSV镜像
│   ├── models.py                 # 数据库模型定义（ORM）
│   └── mysql_connector.py        # MySQL连接池管理（1.4KB）
│
├── gui/                          # 图形界面模块
│   ├── assets/                   # 静态资源
│   │   └── icons/                # 图标资源
│   ├── widgets/                  # 自定义组件
│   │   ├── camera_panel.py       # 摄像头显示组件
│   │   ├── login_form.py         # 登录表单组件
│   │   └── status_bar.py         # 状态栏组件
│   └── GUI.py                    # 主界面窗口类
│
├── img/                          # 测试图像存储
│   └── test.jpeg                 # 测试用示例图像（49.3KB）
│
├── logs/                         # 系统日志
│   └── training/                 # 训练过程日志
│
├── scripts/                      # 系统脚本
│   ├── data_preprocessing/       # 数据预处理脚本
│   │   ├── gen_onet_samples.py   # ONet训练样本生成
│   │   ├── gen_pnet_samples.py   # PNet训练样本生成
│   │   └── gen_rnet_samples.py   # RNet训练样本生成
│   │
│   ├── db_init.py                # 数据库初始化脚本（1.1KB）
│   └── face_encoder.py           # 批量人脸编码工具
│
├── tests/                        # 测试套件
│   ├── data/                     # 测试数据集
│   │   ├── faces/                # 人脸测试图像
│   │   └── features/             # 预生成特征向量
│   │
│   ├── gui/                      # 界面测试
│   │   ├── test_widgets.py       # 组件功能测试
│   │   └── test_windows.py       # 窗口流程测试
│   │
│   ├── integration/              # 集成测试
│   │   ├── test_login.py         # 登录流程测试
│   │   ├── test_permissions.py   # 权限管理测试
│   │   └── test_registration.py  # 注册流程测试
│   │
│   ├── performance/              # 性能测试
│   │   ├── test_latency.py       # 延迟测试
│   │   └── test_resources.py     # 资源消耗测试
│   │
│   ├── unit/                     # 单元测试
│   │   ├── test_database.py      # 数据库操作测试
│   │   ├── test_detection.py     # 人脸检测测试
│   │   ├── test_encoder.py       # 特征编码测试
│   │   └── test_security.py      # 安全模块测试
│   │
│   └── test.sql                  # SQL测试脚本（16B）
│
├── weights/                      # 模型权重存储
│   ├── mtcnn_weights.pth         # 完整MTCNN权重（110.5MB）
│   └── mtcnn.pt                  # 兼容格式权重备份
│
├── config.py                     # 主配置文件（数据库连接、路径参数等）
├── project_tree.py               # 目录结构生成脚本（4.4KB）
├── README.md                     # 项目说明文档（7.6KB）
└── temp.md                       # 临时设计文档（6KB）

```

